pipeline {
environment {
      imagename = "ahlamsd/springboot-docker-jenkins1"
      registryCredential = 'docker-hub'
      dockerImage = ''
}
agent any
    stage('Building image') {
        steps{
           script {
             dockerImage = docker.build imagename
         }
           }
           }
     stage('Deploy Image') {
          steps {
              script { 
                   docker.withRegistry( '', registryCredential ) {
                   dockerImage.push("$BUILD_NUMBER")
                   dockerImage.push('latest')
               } 
                 }
                   } 
                   }
       } 
      }
